version: 2.1

orbs:
  docker: circleci/docker@2.2.0
  cli: digitalocean/cli@0.1.1

executors:
  docker:
    environment:
      DOCKER_HUB_USERNAME: $DOCKER_HUB_USERNAME
      DOCKER_HUB_PASSWORD: $DOCKER_HUB_PASSWORD
    docker:
      - image: docker:stable

jobs:
  deploy:
    description: |
      Install doctl and initialize to connect to DigitalOcean
    executor: doctl/default
    parameters:
      executor:
        default: default
        description: |
          Executor to use for this job. Defaults to this orb's default executor.
        type: executor
    steps:
      - install
      - initialize:
          digitalocean-access-token: $DIGITALOCEAN_ACCESS_TOKEN
            
